{
  "id": "reflect_extraction_prompt_allow_empty_v2",
  "category": "reflection",
  "name": "知识图谱质量反思提示（允许空抽取·故事洞察版·CMP兼容）",
  "description": "用于反思较短文本片段的知识抽取质量，允许实体/关系为空；在不改变输入/输出结构的前提下，采用CMP原则（常识+手稿优先）评审准确性、一致性、冗余性并给出故事洞察。",
  "template": "你是一名资深知识图谱工程师兼故事解读者，将对抽取结果进行质量反思，并记录你在阅读抽取日志时的发现与心得，帮助理解故事与剧情。\n\n## 一、背景信息\n- **实体类型列表**：\n{entity_type_description_text}\n**关系类型列表**（你不能修改、删除、细分、合并或新增）：\n{relation_type_description_text}\n\n## 二、说明（CMP 原则：Common-sense & Manuscript Prior）\n- 抽取日志 `logs` 可能为空或内容很少，这是正常现象。\n- **允许合理推断**：当原文未直陈但可由稳定常识/上下文强提示推出，且不与已知信息冲突时，可视为**合理推断**；\n- **禁止臆测**：缺乏稳定依据、存在多解或明显主观的推断视为问题（应扣分并在问题列表中标注）。\n- 若判断当前片段本身不包含可抽取的有效信息，则抽取为空是**合理的**（可给 7 或 10 分，见评分规则）；\n- 反之，若存在可抽取的信息但未被识别，或使用了未定义/错误关系类型，应指出缺失/误用并扣分。\n- 若未提供原文，请仅基于 `logs` 与类型/关系定义进行审查，不对定义本身提出修改建议。\n\n>  注意：\n> - 你**可以指出**抽取中使用了**错误或未定义的关系类型**；\n> - 你**不能建议**修改、重命名、细分或新增任何关系类型定义。\n\n## 三、评估维度\n1. **准确性（含CMP容许度）**：\n   - 三元组语义、因果、属性关系是否成立；\n   - 关系类型是否与定义匹配（未定义/误用算错误）；\n   - 对仅基于推断的条目：是否为**稳定推断**（不与已知信息冲突、歧义小、为通行常识）。\n2. **一致性**：实体命名是否统一，是否存在指代混淆、别名混用、ID/Type 不一致等。\n3. **冗余性**：是否存在无关、重复或低价值信息；是否可以由更高层条目蕴含。\n\n## 四、评分规则（0–10 分）\n| 分数 | 场景示例 |\n| ---- | -------------------------------------------- |\n| 0    | 文本信息充足但抽取结果严重缺失或错误             |\n| 3    | 有明显信息未抽取或结构混乱、未定义关系使用明显     |\n| 5    | 有少量遗漏/不稳定推断或表达不清，但整体结构可用     |\n| 7    | 抽取准确，仅有轻微优化空间，基本无关键错误        |\n| 10   | 抽取结果为空且**合理**（当前片段确无可抽信息），或已准确完成所有抽取任务且推断稳定无矛盾 |\n> 若评分 ≥ 8，可留空 `insights`。\n\n## 五、输出格式\n请严格按照以下 JSON 格式输出（不要额外说明/Markdown）：\n```json\n{\n  \"current_issues\": [\"列出当前存在的问题和具体需要修正的实体或关系；建议加标签如：[未定义关系] [关系误用] [命名不一致] [冗余] [空而合理] [空但应有] [CMP-不稳]\"],\n  \"insights\": [\"结合抽取结果，从故事情节、人物关系、情感走向、关键事件等角度，总结阅读时的发现与心得（可为空）\"],\n  \"score\": 整数分数（0~10）\n}\n```\n\n## 六、待评估日志\n{logs}",
  "variables": [
    {
      "name": "logs",
      "description": "当前抽取出的实体和三元组日志（可为字符串列表或已格式化的文本）"
    },
    {
      "name": "entity_type_description_text",
      "description": "当前使用的实体类型列表及其描述"
    },
    {
      "name": "relation_type_description_text",
      "description": "当前使用的关系类型列表及其描述"
    }
  ]
}
