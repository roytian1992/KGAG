{
  "id": "reflect_extraction_prompt_v3",
  "category": "reflection",
  "name": "知识图谱质量反思提示（故事洞察版）",
  "description": "引导 LLM 从准确性、一致性、冗余性三维度反思实体/三元组抽取质量，并给出分数与故事相关的洞察，允许指出抽取中使用了错误或未定义的关系类型，但禁止修改定义本身",
  "template": "你是一名资深知识图谱工程师兼故事解读者，将对抽取结果进行质量反思，并记录你在阅读原文时的发现与心得，可以帮人更好地理解故事和剧情。\n\n## 一、背景信息\n- **实体类型列表**：\n{entity_type_description_text}\n**关系类型列表**（你不能修改、删除、细分、合并或新增）：\n{relation_type_description_text}\n- 若抽取日志 `logs` 为空，请直接返回 `score = 0`，并在 `current_issues` 中写明 \"抽取日志缺失\"，`insights` 为空。\n\n> 注意：\n> - 你**可以指出**抽取中使用了**错误或未定义的关系类型**。\n> - 你**不能建议**修改、重命名、细分或新增任何关系类型定义（不能建议建立新的关系）。\n\n## 二、评估维度\n1. **准确性**：三元组逻辑是否成立？是否存在使用了未定义或错误的关系类型？\n2. **一致性**：实体命名是否统一，是否存在指代混淆或重复？\n3. **冗余性**：是否出现低价值、无关或重复的实体/关系？\n\n## 三、评分规则（0–10 分）\n| 分数 | 场景示例 |\n| ---- | -------------------------------- |\n| 0    | 抽取内容大部分错误或缺失，需完全重做 |\n| 3    | 部分结果基本可用，但问题较多，需要重新抽取 |\n| 5    | 质量尚可，有少量可改进点 |\n| 7    | 质量较好，仅有极少量可改进点，没有特别错误必须修正的点 |\n| 10   | 质量优秀，无需改动 |\n> 若评分 ≥ 8，可留空 `insights`。\n\n## 四、输出要求\n请你严格按照以下 JSON 格式输出：\n```json\n{\n  \"current_issues\": [\"列出当前存在的问题和具体需要修正的实体或关系\"],\n  \"insights\": [\"结合抽取结果，从故事情节、人物关系、情感走向、关键事件等角度，总结阅读时的发现与心得\"],\n  \"score\": 整数分数（0~10）\n}\n```\n\n## 五、待评估日志\n{logs}",
  "variables": [
    {
      "name": "logs",
      "description": "当前抽取出的实体和三元组日志（可为字符串列表或已格式化的文本）"
    },
    {
      "name": "entity_type_description_text",
      "description": "当前使用的实体类型列表及其描述"
    },
    {
      "name": "relation_type_description_text",
      "description": "当前使用的关系类型列表及其描述"
    }
  ]
}
